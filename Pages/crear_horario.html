<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horarios - Gestión OIKOS</title>
    <link rel="shortcut icon" href="../Images/logo.ico" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
    <link rel="stylesheet" href="../CSS/crear_horario.css">
    <script src="../Scripts/seguridad.js"></script>
    <script>window.rolesPermitidos = ['ENCARGADO_COMUNIDAD'];</script>
</head>
<body>

    <div class="ui vertical inverted sidebar menu sidebar-menu" style="background-color: #9A9CEA;">
        <div class="item">
            <div class="header">
                <h2 class="ui inverted header">
                    <i class="cog icon"></i>
                    <div class="content">
                        Panel Gestor
                        <div class="sub header">Gestión de Habitantes</div>
                    </div>
                </h2>
            </div>
        </div>
        <div class="item">
            <div class="menu">
                <a class="item" href="./gestor.html">
                    <i class="home icon"></i> Panel de Control
                </a>
                <a class="item" href="./gestion_habitantes.html">
                    <i class="users icon"></i> Habitantes
                </a>
                <a class="item" href="./solicitudes.html">
                    <i class="chart bar icon"></i> Incidencias
                </a>
                <a class="item" href="./solicitudes_nuevas.html">
                    <i class="user icon"></i> Solicitudes nuevas
                </a>
                <a class="item" href="./pagos_gestor.html">
                    <i class="money bill alternate icon"></i> Pagos
                </a>
                <a class="active item" href="./crear_horario.html">
                    <i class="clock icon"></i> Modificar Horarios
                </a>
            </div>
        </div>
        <div class="item">
            <div class="ui divider"></div>
            <a class="item" onclick="cerrarSesion()">
                <i class="sign out icon"></i> Cerrar Sesión
            </a>
        </div>
        <div class="sidebar-footer-image">
            <img src="../Images/logopng.png" alt="Decoración de Sidebar">
        </div>
    </div>

    <div class="pusher">
        
        <div class="ui top fixed menu" style="background-color: #9A9CEA;">
            <div class="ui container">
                <div class="item">
                    <img src="../Images/logopng.png" alt="Logo">
                </div>
                <a class="item" id="sidebar-toggle">
                    <i class="sidebar icon" style="color: white;"></i>
                </a>
                <div class="header item" style="color: white;">
                    Gestión de Horarios
                </div>
                <div class="right menu">
                    <div class="ui dropdown item" style="color: white;">
                        <i class="user icon" style="color: white;"></i> Gestor
                        <i class="dropdown icon"></i>
                        <div class="menu">
                            <a class="item"><i class="user icon"></i> Mi Perfil</a>
                            <div class="divider"></div>
                            <a class="item" onclick="cerrarSesion()"><i class="sign out icon"></i> Cerrar Sesión</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="ui container">
                
                <div class="ui header">
                    <h1>
                        <i class="clock icon"></i>
                        Gestión de Horarios del Condominio
                        <div class="sub header">Administra los horarios de piscina, gimnasio y áreas comunes</div>
                    </h1>
                </div>
                
                <div class="ui divider"></div>
                
                <div class="horarios-dashboard" id="dashboard-container">
                    <div class="ui active centered inline loader" style="margin-top: 50px;"></div>
                </div>
                
                <div class="tools-bar" style="margin-top: 30px; margin-bottom: 20px;">
                    <button class="ui primary button" id="nuevo-horario-btn">
                        <i class="plus icon"></i> Nuevo Horario
                    </button>
                    
                    <button class="ui green button" id="publicar-horarios-btn">
                        <i class="bullhorn icon"></i> Notificar Cambios
                    </button>
                </div>
                
                <div class="horarios-container">
                    <div class="horarios-table-container">
                        <table class="ui celled table" id="tabla-horarios">
                            <thead>
                                <tr>
                                    <th>Área/Actividad</th>
                                    <th>Tipo</th>
                                    <th>Días</th>
                                    <th>Horario</th>
                                    <th>Estado</th>
                                    <th>Capacidad</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="horarios-body">
                                </tbody>
                        </table>
                    </div>
                    
                    <div class="empty-state" id="empty-state" style="display: none; text-align: center; padding: 40px;">
                        <i class="clock outline icon" style="font-size: 3em; color: #ccc;"></i>
                        <h3 style="color: #666;">No hay horarios configurados</h3>
                        <p>Comienza agregando un nuevo horario para las áreas comunes.</p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="ui modal" id="horario-modal">
        <i class="close icon"></i>
        <div class="header" id="modal-horario-header">Nuevo Horario</div>
        <div class="scrolling content">
            <form class="ui form" id="form-horario">
                <input type="hidden" id="horario-id">
                
                <div class="two fields">
                    <div class="field required">
                        <label>Área</label>
                        <select class="ui dropdown" id="area">
                            <option value="">Seleccionar</option>
                            <option value="piscina">Piscina</option>
                            <option value="gimnasio">Gimnasio</option>
                            <option value="salon">Salón de Eventos</option>
                            <option value="parque">Parque Infantil</option>
                            <option value="bbq">Área BBQ</option>
                            <option value="estacionamiento">Estacionamiento</option>
                            <option value="otro">Otro</option>
                        </select>
                    </div>
                    <div class="field required">
                        <label>Tipo</label>
                        <select class="ui dropdown" id="tipo">
                            <option value="regular">Regular</option>
                            <option value="especial">Especial</option>
                            <option value="temporal">Temporal</option>
                            <option value="reserva">Solo Reserva</option>
                        </select>
                    </div>
                </div>
                
                <div class="field required">
                    <label>Nombre del Horario</label>
                    <input type="text" id="nombre" placeholder="Ej: Horario General Piscina" required>
                </div>
                
                <div class="field required">
                    <label>Días</label>
                    <div class="inline fields">
                        <div class="field"><div class="ui checkbox"><input type="checkbox" name="dias" value="lunes"><label>L</label></div></div>
                        <div class="field"><div class="ui checkbox"><input type="checkbox" name="dias" value="martes"><label>M</label></div></div>
                        <div class="field"><div class="ui checkbox"><input type="checkbox" name="dias" value="miercoles"><label>X</label></div></div>
                        <div class="field"><div class="ui checkbox"><input type="checkbox" name="dias" value="jueves"><label>J</label></div></div>
                        <div class="field"><div class="ui checkbox"><input type="checkbox" name="dias" value="viernes"><label>V</label></div></div>
                        <div class="field"><div class="ui checkbox"><input type="checkbox" name="dias" value="sabado"><label>S</label></div></div>
                        <div class="field"><div class="ui checkbox"><input type="checkbox" name="dias" value="domingo"><label>D</label></div></div>
                    </div>
                </div>
                
                <div class="two fields">
                    <div class="field required"><label>Desde</label><input type="time" id="hora-inicio" required></div>
                    <div class="field required"><label>Hasta</label><input type="time" id="hora-fin" required></div>
                </div>
                
                <div class="two fields">
                    <div class="field required">
                        <label>Estado</label>
                        <select class="ui dropdown" id="estado">
                            <option value="activo">Activo</option>
                            <option value="inactivo">Inactivo</option>
                        </select>
                    </div>
                    <div class="field"><label>Capacidad (Opcional)</label><input type="number" id="capacidad"></div>
                </div>
                
                <div class="field"><label>Descripción</label><textarea id="descripcion" rows="2"></textarea></div>
                
                <div class="field">
                    <label>Reglas / Restricciones</label>
                    <div id="restricciones-list" style="margin-bottom: 10px;"></div>
                    <button type="button" class="ui mini basic button" id="agregar-restriccion">
                        <i class="plus icon"></i> Agregar Regla
                    </button>
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Cancelar</div>
            <div class="ui primary button submit-horario">Guardar</div>
        </div>
    </div>

    <div class="ui modal" id="excepciones-modal">
        <i class="close icon"></i>
        <div class="header">Excepciones de Horario</div>
        <div class="content">
            <div class="ui form">
                <div class="fields">
                    <div class="six wide field"><input type="date" id="excepcion-fecha"></div>
                    <div class="six wide field">
                        <select class="ui dropdown" id="excepcion-tipo">
                            <option value="cerrado">Cerrado</option>
                            <option value="mantenimiento">Mantenimiento</option>
                            <option value="horario-especial">Horario Especial</option>
                        </select>
                    </div>
                    <div class="four wide field"><button class="ui button primary fluid" id="btn-add-excepcion">Agregar</button></div>
                </div>
            </div>
            <div class="ui segment" id="lista-excepciones">
                </div>
        </div>
        <div class="actions"><div class="ui button cancel">Cerrar</div></div>
    </div>

    <script src="../Scripts/crear_horarios.js"></script>
</body>
</html>