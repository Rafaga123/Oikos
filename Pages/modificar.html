<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modificar Reglas - OIKOS</title>
    
    <link rel="shortcut icon" href="../Images/logo.ico" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <link rel="stylesheet" href="../CSS/modificar.css">
    <script src="../Scripts/seguridad.js"></script>
    <script>window.rolesPermitidos = ['ENCARGADO_COMUNIDAD'];</script>
</head>
<body>

    <div class="ui vertical inverted sidebar menu sidebar-menu" style="background-color: #9A9CEA;">
        <div class="item">
            <div class="header">
                <h2 class="ui inverted header">
                    <i class="cog icon"></i>
                    <div class="content">
                        Panel Gestor
                        <div class="sub header">Gestión de Habitantes</div>
                    </div>
                </h2>
            </div>
        </div>
        <div class="item">
            <div class="menu">
                <a class="item" href="./gestor.html"><i class="home icon"></i> Panel de Control</a>
                <a class="item" href="./gestion_habitantes.html"><i class="users icon"></i> Habitantes</a>
                <a class="item" href="./solicitudes.html"><i class="chart bar icon"></i> Incidencias</a>
                <a class="item" href="./solicitudes_nuevas.html"><i class="user icon"></i> Solicitudes nuevas</a>
                <a class="item" href="./pagos_gestor.html"><i class="money bill alternate icon"></i> Pagos</a>
                <a class="item" href="./crear_horario.html"><i class="clock icon"></i> Modificar Horarios</a>
                <a class="item" href="./foro_gestor.html"><i class="comments icon"></i> Foro comunitario</a>
                <a class="item" href="./configuracion.html">
                    <i class="cogs icon"></i>
                    Configuración
                </a>
                <a class="item" href="./modificar_metodo_pago.html">
                    <i class="clock icon"></i>
                    Modificar Pagomovil
                </a>
            </div>
        </div>
        <div class="item">
            <div class="ui divider"></div>
            <a class="item" onclick="cerrarSesion()"><i class="sign out icon"></i> Cerrar Sesión</a>
        </div>
        <div class="sidebar-footer-image">
            <img src="../Images/logopng.png" alt="Decoración de Sidebar">
        </div>
    </div>

    <div class="pusher">
        
        <div class="ui top fixed menu" style="background-color: #9A9CEA;">
            <div class="ui container">
                <div class="item"><img src="../Images/logopng.png" alt="Logo"></div>
                <a class="item" id="sidebar-toggle"><i class="sidebar icon" style="color: white;"></i></a>
                <div class="header item" style="color: white;">Reglamento</div>
                <div class="right menu">
                    <div class="ui dropdown item" style="color: white;">
                        <i class="user icon" style="color: white;"></i> Gestor
                        <i class="dropdown icon"></i>
                        <div class="menu">
                            <a class="item"><i class="user icon"></i> Mi Perfil</a>
                            <div class="divider"></div>
                            <a class="item" onclick="cerrarSesion()"><i class="sign out icon"></i> Cerrar Sesión</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content" style="margin-top: 80px; padding: 20px;">
            <div class="ui container">
                
                <div class="ui grid stackable">
                    <div class="twelve wide column">
                        <h1 class="ui header">
                            <i class="edit icon"></i>
                            <div class="content">
                                Modificar Reglas del Condominio
                                <div class="sub header">Administra y actualiza las reglas del condominio</div>
                            </div>
                        </h1>
                    </div>
                    <div class="four wide column right aligned">
                        <button class="ui primary button" id="add-rule-btn">
                            <i class="plus icon"></i> Agregar Regla
                        </button>
                    </div>
                </div>
                
                <div class="ui divider"></div>
                
                <div class="ui secondary menu stackable categories-filter">
                    <a class="item active category-filter-btn" data-category="all">Todas</a>
                    <a class="item category-filter-btn" data-category="convivencia">Convivencia</a>
                    <a class="item category-filter-btn" data-category="areas-comunes">Áreas Comunes</a>
                    <a class="item category-filter-btn" data-category="seguridad">Seguridad</a>
                    <a class="item category-filter-btn" data-category="administrativo">Administrativo</a>
                    <a class="item category-filter-btn" data-category="otros">Otros</a>
                </div>
                
                <div class="rules-container" style="margin-top: 20px;">
                    <h3 class="ui header">
                        <i class="law icon"></i>
                        <div class="content">
                            Reglas Actuales
                            <div class="sub header" id="rules-count">Cargando...</div>
                        </div>
                    </h3>
                    
                    <div class="ui segment basic" id="rules-list">
                        <div class="ui active centered inline loader"></div>
                    </div>
                </div>
                
                <div class="ui segment rule-editor" id="rule-editor" style="display: none; margin-top: 30px; border-top: 4px solid #9A9CEA;">
                    <h3 class="ui header" id="editor-title"><i class="edit icon"></i> Nueva Regla</h3>
                    <form class="ui form" id="rule-form">
                        <input type="hidden" id="rule-id">
                        
                        <div class="field required">
                            <label>Título de la Regla</label>
                            <input type="text" id="rule-title" placeholder="Ej: Horario de silencio" required>
                        </div>
                        
                        <div class="field required">
                            <label>Categoría</label>
                            <select class="ui dropdown" id="rule-category" required>
                                <option value="">Seleccionar categoría</option>
                                <option value="convivencia">Convivencia</option>
                                <option value="areas-comunes">Áreas Comunes</option>
                                <option value="seguridad">Seguridad</option>
                                <option value="administrativo">Administrativo</option>
                                <option value="otros">Otros</option>
                            </select>
                        </div>
                        
                        <div class="field required">
                            <label>Contenido</label>
                            <textarea id="rule-content" rows="4" placeholder="Describe la regla..." required></textarea>
                        </div>
                        
                        <div class="actions">
                            <button type="button" class="ui button" id="cancel-edit-btn">Cancelar</button>
                            <button type="submit" class="ui primary button" id="save-rule-btn">Guardar</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <div class="ui small modal" id="confirm-modal">
        <div class="header">Eliminar Regla</div>
        <div class="content">
            <p>¿Estás seguro de que deseas eliminar esta regla? Esta acción no se puede deshacer.</p>
        </div>
        <div class="actions">
            <div class="ui button cancel">Cancelar</div>
            <div class="ui negative button" id="confirm-delete-btn">Eliminar</div>
        </div>
    </div>

    <script src="../Scripts/scripts_modificar.js"></script>
</body>
</html>